<!DOCTYPE html>
<html>
  <head>
    <script
      type="text/javascript"
      src="https://getfirebug.com/firebug-lite-debug.js"
    ></script>
    <meta name="description" content="CS4406 Computer Graphics - Exercise #1" />
    <meta charset="utf-8" />
    <title>Programming Assignment Unit 3</title>
    <style>
      #container {
        background: #000000;
        width: 100%;
        height: 100%;
      }
    </style>
    <meta charset="utf-8" />
    <title>CS4406 Computer Graphics - Exercise #3</title>
  </head>
  <body>
    <div id="container"></div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
    <script src="http://uopeopleweb.com/js/dat.gui.min.js"></script>
    <script src="https://threejs.org/build/three.js"></script>
    <script src="https://cdn.rawgit.com/mrdoob/three.js/master/examples/js/controls/OrbitControls.js"></script>
    <script src="http://uopeopleweb.com/js/math.js"></script>
    <script src="http://uopeopleweb.com/js/Detector.js"></script>

    <script type="text/javascript">
      // Set the scene size
      var WIDTH = 500,
        HEIGHT = 500;

      // Set some camera attributes
      var VIEW_ANGLE = 45,
        ASPECT = WIDTH / HEIGHT,
        NEAR = 1,
        FAR = 1000;

      // Get the DOM element to attach to
      var $container = $("#container");

      // Create a WebGL renderer, camera, and a scene
      var renderer = new THREE.WebGLRenderer();
      var scene = new THREE.Scene();
      var clock = new THREE.Clock();
      var camera = new THREE.PerspectiveCamera(VIEW_ANGLE, ASPECT, NEAR, FAR);

      // The camera starts at 0,0,0 so pull it back
      camera.position.z = 200;
      scene.add(camera);

      // Set up camera controls
      var cameraControls = new THREE.OrbitControls(camera, renderer.domElement);
      cameraControls.addEventListener("mousemove", renderer);
      cameraControls.autoRotate = true;

      // Start the renderer
      renderer.setSize(WIDTH, HEIGHT);
      $container.append(renderer.domElement);

      // Define the object parameters
      var N = 12;
      var mesh;
      var directionX = 1;
      var directionY = 1;

      // Create the 3D object (sphere)
      var geometry = new THREE.SphereGeometry(10, 32, 32); // Create a sphere
      var material = new THREE.MeshLambertMaterial({ color: 0x00ff00 }); // Initial color green
      mesh = new THREE.Mesh(geometry, material);
      scene.add(mesh);

      // Define the light source (yellow, upper left corner)
      var light = new THREE.PointLight(0xffffaa, 1, 500);
      light.position.set(-150, 150, 200);
      scene.add(light);

      // Define the animation loop
      function animate() {
        requestAnimationFrame(animate);

        // Update the position of the object
        mesh.position.x += directionX * 2; // Change the speed as needed
        mesh.position.y += directionY * 2;

        // Bounce off the walls
        if (mesh.position.x >= 250 || mesh.position.x <= -250) {
          directionX *= -1;
          changeColor(); // Change color on bounce
        }
        if (mesh.position.y >= 250 || mesh.position.y <= -250) {
          directionY *= -1;
          changeColor(); // Change color on bounce
        }

        // Update the camera controls
        cameraControls.update();
        render();
      }

      // Function to render the scene
      function render() {
        renderer.render(scene, camera);
      }

      // Function to change the color of the object when bouncing
      function changeColor() {
        var color = new THREE.Color(
          Math.random(),
          Math.random(),
          Math.random()
        ); // Random color
        mesh.material.color.set(color);
      }

      // Start the animation loop
      animate();
    </script>
  </body>
</html>
